# Spark MovieLens åˆ†æå¹³å°

æœ¬é¡¹ç›®åŸºäº Apache Spark æ„å»ºä¸€ä¸ªäº¤äº’å¼ç”µå½±æ•°æ®åˆ†æå¹³å°ï¼Œæ”¯æŒä»¥ä¸‹ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ï¼š

1. **Top 20 é«˜åˆ†ç”µå½±åˆ†æ**ï¼šåŸºäºç”¨æˆ·è¯„åˆ†è®¡ç®—å¹³å‡åˆ†å¹¶æ’åºã€‚
2. **æ ‡ç­¾æ€§åˆ«åå¥½åˆ†æ**ï¼šç»Ÿè®¡ä¸åŒæ€§åˆ«ç”¨æˆ·å¯¹ç”µå½±æ ‡ç­¾çš„ä½¿ç”¨é¢‘ç‡ã€‚
3. **å®æ—¶è¯„åˆ†æµå¤„ç†**ï¼šé€šè¿‡æ¨¡æ‹Ÿå®æ—¶è¯„åˆ†æ•°æ®ï¼ŒåŠ¨æ€å±•ç¤ºç»Ÿè®¡æŒ‡æ ‡ï¼ˆå¦‚å¹³å‡å€¼ã€æœ€å¤§/æœ€å°å€¼ç­‰ï¼‰ã€‚

é¡¹ç›®æ•´åˆäº† Flask Web æ¡†æ¶ã€PySparkã€MySQL å’Œ Socket.IOï¼Œé€‚ç”¨äºå¤§æ•°æ®æ•™å­¦æ¼”ç¤ºæˆ–è½»é‡çº§æ¨èç³»ç»ŸåŸå‹å¼€å‘ã€‚

---
```
## ğŸ—‚ï¸ ç›®å½•ç»“æ„
spark-movielens-analysis/
â”œâ”€â”€ app.py                  # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–
â”œâ”€â”€ uploads/                # ç”¨æˆ·ä¸Šä¼ çš„ movies.csv å­˜æ”¾ç›®å½•
â”œâ”€â”€ data/                   # é™æ€æ•°æ®é›†ï¼ˆå¦‚ ratings.csvï¼‰
â”œâ”€â”€ streaming_data/         # å®æ—¶è¯„åˆ†æµå†™å…¥ç›®å½•
â”œâ”€â”€ spark_jobs/             # PySpark å¤„ç†é€»è¾‘
â”‚   â”œâ”€â”€ task1_processing.py
â”‚   â”œâ”€â”€ task2_processing.py
â”‚   â””â”€â”€ task3_processing.py
â”œâ”€â”€ templates/              # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ task1.html
â”‚   â”œâ”€â”€ task2.html
â”‚   â””â”€â”€ task3.html
â””â”€â”€ setup_mysql.py          # åˆå§‹åŒ– MySQL æ•°æ®åº“è„šæœ¬
```


## âš™ï¸ ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Java 8 æˆ– 11ï¼ˆSpark ä¾èµ–ï¼‰
- Apache Spark 3.3+ï¼ˆå·²é€šè¿‡ `pyspark==3.3.0` å®‰è£…ï¼‰
- MySQL 5.7+ æˆ– 8.0
- Node.jsï¼ˆå¯é€‰ï¼Œä»…ç”¨äºå‰ç«¯å¼€å‘æ‰©å±•ï¼‰

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
æ³¨æ„ï¼šç¡®ä¿å·²å®‰è£… mysql-connector-java-8.0.23.jar å¹¶æ”¾ç½®åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼ˆæˆ–é…ç½® Spark çš„ --jars è·¯å¾„ï¼‰ã€‚
```
### 2. åˆå§‹åŒ–æ•°æ®åº“
ç¼–è¾‘ setup_mysql.py ä¸­çš„ root å¯†ç ï¼Œç„¶åè¿è¡Œï¼š

```bash
python setup_mysql.py
```
è¯¥è„šæœ¬å°†ï¼š

åˆ›å»º movielens æ•°æ®åº“
åˆ›å»ºç”¨æˆ· movielens / movielens123
å»ºç«‹ movies, ratings, tags, users è¡¨
### 3. å‡†å¤‡æ•°æ®
å°† ratings.csv æ”¾å…¥ data/ml-latest/ratings.csv
ï¼ˆå¯é€‰ï¼‰å°† movies.csvã€tags.csvã€users.dat å¯¼å…¥ MySQLï¼ˆéœ€è‡ªè¡Œç¼–å†™ ETL è„šæœ¬ï¼‰
æœ¬é¡¹ç›® Task1 æ”¯æŒç”¨æˆ·ä¸Šä¼  movies.csvï¼›Task2 ä» MySQL è¯»å– tags å’Œ users è¡¨ã€‚

### 4. å¯åŠ¨æœåŠ¡
```bash
python app.py
```
è®¿é—® http://localhost:5000 å³å¯ä½¿ç”¨ã€‚

ğŸŒ åŠŸèƒ½è¯´æ˜
é¡µé¢	åŠŸèƒ½
/	é¦–é¡µ
/task1	ä¸Šä¼  movies.csvï¼Œä¸æœ¬åœ° ratings.csv å…³è”ï¼Œè¾“å‡º Top 20 é«˜åˆ†ç”µå½±
/task2	ä» MySQL æŸ¥è¯¢æ ‡ç­¾ä½¿ç”¨æƒ…å†µï¼ŒæŒ‰æ€§åˆ«åˆ†ç»„å±•ç¤º Top 10 æ ‡ç­¾
/task3	å¯åŠ¨ Spark Streaming ç›‘å¬ streaming_data/ ç›®å½•ï¼Œæ¥æ”¶ JSON è¯„åˆ†æµå¹¶é€šè¿‡ WebSocket å®æ—¶æ›´æ–°å‰ç«¯
ğŸ“œ è®¸å¯è¯
æœ¬é¡¹ç›®ä»£ç é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

MovieLens æ•°æ®é›†ç‰ˆæƒå½’ GroupLens Research æ‰€æœ‰ï¼Œè¯·éµå®ˆå…¶ä½¿ç”¨æ¡æ¬¾ã€‚

âš ï¸ æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ ä¸ç ”ç©¶ï¼Œä¸å¾—ç”¨äºå•†ä¸šç”¨é€”ã€‚

ğŸ¤ è´¡çŒ®
æ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼è¯¦è§ CONTRIBUTING.mdã€‚
